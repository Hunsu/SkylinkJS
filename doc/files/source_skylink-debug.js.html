<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>source/skylink-debug.js - skylinkjs</title>
    <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900,200italic,300italic,400italic,600italic,700italic,900italic" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro:400,600' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/ico" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.svg" title="skylinkjs"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <span>
                API Docs for: <a href="http://temasys.github.io">0.5.3</a>
            </span>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/Skylink.html">Skylink</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: source/skylink-debug.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * The log levels.
 * - Logs are shown based on the level, if the level is highest, it shows logs
 *   which level are lower than theirs. If the level is lower, it shows only
 *   logs that are lower or are the same level, not the higher ones.
 * - Order from lowest to the highest is: error &gt; warn &gt; info &gt; log &gt; debug.
 * @attribute PEER_CONNECTION_STATE
 * @type JSON
 * @param {String} DEBUG Level 5. Shows debug logs.
 * @param {String} TRACE Level 4. Shows trace logs.
 * @param {String} INFO Level 3. Show informational logs related to user.
 * @param {String} WARN Level 2. Shows warnings.
 * @param {String} ERROR Level 1. Shows the errors that are thrown during
 *   execution.
 * @readOnly
 * @since 0.5.2
 */
Skylink.prototype.LOG_LEVEL = {
  DEBUG: &#x27;debug&#x27;,
  TRACE: &#x27;log&#x27;,
  INFO: &#x27;info&#x27;,
  WARN: &#x27;warn&#x27;,
  ERROR: &#x27;error&#x27;
};

/**
 * The log level of Skylink
 * @attribute _logLevel
 * @type String
 * @default &#x27;warn&#x27;
 * @required
 * @private
 * @since 0.5.2
 */
Skylink.prototype._logLevel = &#x27;warn&#x27;;

/**
 * The current state if debugging mode is enabled.
 * @attribute _enableDebugMode
 * @type Boolean
 * @default false
 * @private
 * @required
 * @since 0.5.2
 */
Skylink.prototype._enableDebugMode = false;

/**
 * Logs all the console information.
 * - TODO: Set all interface information.
 * @method _log
 * @param {String} logLevel The log level. [Rel: Skylink.LOG_LEVEL]
 * @param {JSON|String} message The console message.
 * @param {String} message.target The targetPeerId the message is targeted to.
 * @param {String} message.interface The interface the message is targeted to.
 * @param {Array|String} message.keys The events the message is targeted to.
 * @param {String} message.log The log message.
 * @param {Object|String} debugObject The console parameter string or object.
 * @private
 * @required
 * @since 0.5.2
 */
Skylink.prototype._log = function(logLevel, message, debugObject) {
  var logOrders = { debug: 4, log: 3, info: 2, warn: 1, error: 0 };
  if (typeof logOrders[logLevel] !== &#x27;number&#x27;) {
    this._log(this.LOG_LEVEL.ERROR, {
      interface: &#x27;Log&#x27;,
      log: &#x27;Invalid log level provided. Provided log level: &#x27;
    }, logLevel);
    return;
  }
  if (logOrders[this._logLevel] &gt;= logOrders[logLevel]) {
    var outputLog = &#x27;SkylinkJS&#x27;;
    if (typeof message === &#x27;object&#x27;) {
      outputLog += (message.target) ? &#x27; [&#x27; + message.target + &#x27;] -&#x27; : &#x27; -&#x27;;
      outputLog += (message.interface) ? &#x27; &lt;&lt;&#x27; + message.interface + &#x27;&gt;&gt;&#x27; : &#x27;&#x27;;
      if (message.keys) {
        outputLog += &#x27; &#x27;;
        if (typeof message.keys === &#x27;object&#x27;) {
          for (var i = 0; i &lt; message.keys.length; i++) {
            outputLog += &#x27;(&#x27; + message.keys[i] + &#x27;)&#x27;;
          }
        } else {
          outputLog += &#x27;(&#x27; + message.keys + &#x27;)&#x27;;
        }
      }
      outputLog += &#x27; &#x27; + message.log;
    } else {
      outputLog += &#x27; - &#x27; + message;
    }
    // Fallback to log if failure
    logLevel = (typeof console[logLevel] === &#x27;undefined&#x27;) ? this.LOG_LEVEL.TRACE : logLevel;
    if (this._enableDebugMode) {
      if (typeof debugObject !== &#x27;undefined&#x27;) {
        console[logLevel](outputLog, debugObject, this._getStack());
      } else {
        console[logLevel](outputLog, this._getStack());
      }
    } else {
      if (typeof debugObject !== &#x27;undefined&#x27;) {
        console[logLevel](outputLog, debugObject);
      } else {
        console[logLevel](outputLog);
      }
    }
  }
};

/**
 * Stack class of Skylink.
 * @property SkylinkStack
 * @param {Array} stack The stack object.
 * @private
 * @since 0.5.2
 */
Skylink.prototype.SkylinkStack = function (stack) {
  this.stack = stack;
};

/**
 * Stacks all the caller functions.
 * @author codeovertones.com
 * @method _getStack
 * @return {Object} SkylinkStack object.
 * @private
 * @required
 * @since 0.5.2
 */
Skylink.prototype._getStack = function() {
  var e = new Error(&#x27;SkylinkStack&#x27;);
  var stack = e.stack.replace(/^[^\(]+?[\n$]/gm, &#x27;&#x27;)
      .replace(/^\s+at\s+/gm, &#x27;&#x27;)
      .replace(/^Object.&lt;anonymous&gt;\s*\(/gm, &#x27;{anonymous}()@&#x27;)
      .split(&#x27;\n&#x27;);
  return new this.SkylinkStack(stack);
};

/**
 * Sets the debugging log level.
 * - The default log level is Skylink.LOG_LEVEL.WARN
 * @method setLogLevel
 * @param {String} logLevel The log level. [Rel: Skylink.LOG_LEVEL]
 * @example
 *   SkylinkDemo.setLogLevel(SkylinkDemo.LOG_LEVEL.TRACE);
 * @since 0.5.2
 */
Skylink.prototype.setLogLevel = function(logLevel) {
  for (var level in this.LOG_LEVEL) {
    if (this.LOG_LEVEL[level] === logLevel) {
      this._logLevel = logLevel;
      this._log(this.LOG_LEVEL.TRACE, {
        interface: &#x27;Log&#x27;,
        keys: level,
        log: &#x27;Log level exists. Level is set&#x27;
      });
      return;
    }
  }
  this._log(this.LOG_LEVEL.ERROR, {
    interface: &#x27;Log&#x27;,
    keys: level,
    log: &#x27;Log level does not exist. Level is not set&#x27;
  });
};

/**
 * Sets Skylink in debugging mode to display stack trace.
 * - By default, debugging mode is turned off.
 * @method setDebugMode
 * @param {Boolean} isDebugMode If debugging mode is turned on or off.
 * @example
 *   SkylinkDemo.setDebugMode(true);
 * @since 0.5.2
 */
Skylink.prototype.setDebugMode = function(isDebugMode) {
  this._enableDebugMode = isDebugMode;
  };
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
